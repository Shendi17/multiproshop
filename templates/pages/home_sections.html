{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home_sections.css') }}">
{% endblock %}
{% block content %}
{#
    Template d'accueil découpé en sections réutilisables
    Utilise {% include %} pour chaque section dans index.html
#}

{% block premium_styles %}
{% endblock %}

{% block premium_main %}
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-9">
                <div id="premiumCarousel" class="carousel slide premium-carousel" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <div class="premium-promo">
                                <span class="text-teal font-large-1-1">Édition Limitée</span>
                                <h2>COLLECTION SCANDINAVE POUR VOTRE CHAMBRE<br>À PARTIR DE <span class="text-green">599€</span></h2>
                                <button class="promo-btn">Acheter maintenant</button>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <div class="premium-promo">
                                <span class="text-orange font-large-1-1">Nouveautés</span>
                                <h2>COLLECTION ÉTÉ 2025<br>JUSQU'À <span class="text-yellow">50% DE RÉDUCTION</span></h2>
                                <button class="promo-btn">Découvrir</button>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-arrow left carousel-control-prev" type="button" data-bs-target="#premiumCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Précédent</span>
                    </button>
                    <button class="carousel-arrow right carousel-control-next" type="button" data-bs-target="#premiumCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Suivant</span>
                    </button>
                </div>
            </div>
            <div class="col-md-3">
                <div class="promo-side-box mb-3">
                    Sacs Unio<br>en cuir
                    <div class="promo-badge">20% OFF</div>
                    <div class="text-muted" class="text-muted about-fine-print">Cuir véritable fait main</div>
                </div>
                <div class="promo-side-box">
                    iPhone 6+<br>32Go
                    <div class="promo-badge">40% OFF</div>
                    <div class="text-muted" class="text-muted about-fine-print">Expérience smartphone ultime</div>
                </div>
            </div>
        </div>

        <div class="row premium-feature-row justify-content-center">
            <div class="col-md-2 premium-feature">
                <i class="fas fa-shipping-fast"></i><br>Livraison gratuite<br><span class="text-muted" class="text-muted about-fine-print">Pour toute commande &gt; 99€</span>
            </div>
            <div class="col-md-2 premium-feature">
                <i class="fas fa-undo"></i><br>Retour sous 90 jours<br><span class="text-muted" class="text-muted about-fine-print">Si problème produit</span>
            </div>
            <div class="col-md-2 premium-feature">
                <i class="fas fa-lock"></i><br>Paiement sécurisé<br><span class="text-muted" class="text-muted about-fine-print">Paiement 100% sécurisé</span>
            </div>
            <div class="col-md-2 premium-feature">
                <i class="fas fa-headset"></i><br>Support 24/7<br><span class="text-muted" class="text-muted about-fine-print">Assistance dédiée</span>
            </div>
            <div class="col-md-2 premium-feature">
                <i class="fas fa-gift"></i><br>Service cadeau<br><span class="text-muted" class="text-muted about-fine-print">Emballage offert</span>
            </div>
        </div>

        <!-- Deals Of The Day section avec pagination -->
        <div class="premium-deals mt-4" class="bg-white rounded-12 p-24-18-14-18 shadow-yellow-07">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h4 class="fw-700">Offres du jour</h4>
                <div class="bg-orange text-white p-6-18 rounded-6 fw-600 font-large-1-1">
                    Se termine dans <span id="deal-timer">20:45:21</span>
                </div>
            </div>
            <div id="deals-list" class="row text-center">
                <!-- Deals JS dynamiques -->
            </div>
            <div class="d-flex justify-content-center mt-2">
                <button class="btn btn-outline-secondary me-2" id="deals-prev"><i class="fas fa-chevron-left"></i></button>
                <span id="deals-pagination" class="fw-600"></span>
                <button class="btn btn-outline-secondary ms-2" id="deals-next"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

        <!-- Suggestions personnalisées -->
        <div class="premium-suggest mt-5" class="bg-light rounded-12 p-22-18-18-18 shadow-black-05">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h4 class="fw-700">Suggestions pour vous</h4>
            </div>
            <div id="suggestions-list" class="row text-center">
                <!-- Suggestions JS dynamiques -->
            </div>
        </div>

        <!-- Newsletter -->
        <div class="premium-newsletter mt-5 mb-2" class="bg-yellow-light rounded-12 p-32-22-22-22 shadow-yellow-10">
            <div class="row align-items-center">
                <div class="col-md-8 text-md-start text-center mb-2 mb-md-0">
                    <h5 class="fw-700">Recevez nos offres exclusives et nouveautés !</h5>
                    <span class="text-gray font-large-1-07">Inscrivez-vous à notre newsletter premium</span>
                </div>
                <div class="col-md-4">
                    <form class="d-flex justify-content-center justify-content-md-end" id="newsletter-form">
                        <input type="email" class="form-control me-2" id="newsletter-email" placeholder="Votre email" required class="maxw-220">
                        <button type="submit" class="btn btn-warning">S'inscrire</button>
                    </form>
                    <div id="newsletter-msg" class="mt-2 text-success" class="d-none fw-600"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block premium_scripts %}
    <script>
    // --- Suppression du JS menu hamburger déroulant premium et sous-entête rétractable (déplacé dans premium_header.js) ---
    // --- Pagination Deals ---
    const dealsData = [
        // page 1
        [
            {img:'https://dummyimage.com/120x120/eee/222&text=SAC', name:'Sac à dos camouflage', price:'1249,99€', desc:'Apple iPhone Retina 6s Plus 64GB', rating:'4.9', url:'#', id:1},
            {img:'https://dummyimage.com/120x120/eee/222&text=CHEMISE', name:'Chemise homme', price:'36,78€', desc:'Marshall Kilburn Portable Wireless Speaker', rating:'4.7', url:'#', id:2},
            {img:'https://dummyimage.com/120x120/eee/222&text=SAC+VOYAGE', name:'Sac de voyage', price:'125,30€', desc:'Herschel Leather Duffle Bag In Brown Color', rating:'4.8', url:'#', id:3},
            {img:'https://dummyimage.com/120x120/eee/222&text=MANETTE', name:'Manette Xbox One', price:'55,30€', desc:'Xbox One Wireless Controller Black Color', rating:'4.7', url:'#', id:4},
            {img:'https://dummyimage.com/120x120/eee/222&text=JOUET', name:'Cheval à bascule', price:'32,39€ <span style="text-decoration:line-through;color:#888;font-size:0.97em;">44,27€</span>', desc:'Grand Slam Indoor Of Show Jumping Novel', rating:'4.6', url:'#', id:5},
            {img:'https://dummyimage.com/120x120/eee/222&text=MONTRE', name:'Montre élégante', price:'105,30€', desc:'Sound Intone I65 Earphone White Version', rating:'4.8', url:'#', id:6}
        ],
        // page 2
        [
            {img:'https://dummyimage.com/120x120/eee/222&text=CASQUE', name:'Casque Bluetooth', price:'59,99€', desc:'Sony WH-1000XM4', rating:'4.9', url:'#', id:7},
            {img:'https://dummyimage.com/120x120/eee/222&text=TABLETTE', name:'Tablette Pro', price:'349,00€', desc:'Samsung Galaxy Tab S7', rating:'4.8', url:'#', id:8},
            {img:'https://dummyimage.com/120x120/eee/222&text=PC', name:'PC Portable', price:'799,00€', desc:'Dell Inspiron 15', rating:'4.7', url:'#', id:9},
            {img:'https://dummyimage.com/120x120/eee/222&text=CAMERA', name:'Caméra HD', price:'99,00€', desc:'GoPro Hero 8', rating:'4.8', url:'#', id:10},
            {img:'https://dummyimage.com/120x120/eee/222&text=ENCEINTE', name:'Enceinte sans fil', price:'129,00€', desc:'JBL Flip 5', rating:'4.9', url:'#', id:11},
            {img:'https://dummyimage.com/120x120/eee/222&text=DRONE', name:'Drone Pro', price:'299,00€', desc:'DJI Mini 2', rating:'4.7', url:'#', id:12}
        ]
    ];
    let dealsPage = 0;
    function renderDeals(){
        const list = document.getElementById('deals-list');
        if(!list) return;
        list.innerHTML = dealsData[dealsPage].map(prod => `
            <div class='col-6 col-md-2 mb-3'>
                <a href="${prod.url}" class="text-decoration-none" data-id="${prod.id}">
                    <img src="${prod.img}" alt="${prod.name}" class="img-thumb-100 rounded-8">
                    <div style="font-weight:600;font-size:1.08rem;">${prod.name}</div>
                    <div style="color:#43a047;font-weight:700;">${prod.price}</div>
                    <div class="font-large-0-97 text-gray">${prod.desc}</div>
                    <div class="text-yellow font-large-1-1">★ ${prod.rating}</div>
                    <button class="btn btn-sm btn-outline-warning mt-1 add-to-cart" type="button" data-id="${prod.id}"><i class="fas fa-cart-plus"></i> Ajouter au panier</button>
                </a>
            </div>
        `).join('');
        const pag = document.getElementById('deals-pagination');
        if(pag) pag.textContent = `Page ${dealsPage+1} / ${dealsData.length}`;
    }
    const dealsPrev = document.getElementById('deals-prev');
    const dealsNext = document.getElementById('deals-next');
    if(dealsPrev && dealsNext) {
      dealsPrev.onclick = function(){if(dealsPage>0){dealsPage--;renderDeals();}};
      dealsNext.onclick = function(){if(dealsPage<dealsData.length-1){dealsPage++;renderDeals();}};
    }
    document.addEventListener('DOMContentLoaded', renderDeals);
    // Ajout au panier (visuel uniquement)
    document.addEventListener('click',function(e){
        if(e.target.closest('.add-to-cart')){
            e.preventDefault();
            alert('Produit ajouté au panier (démo) !');
        }
    });
    // --- Suggestions dynamiques ---
    const suggestions = [
        {img:'https://dummyimage.com/120x120/eee/222&text=TV', name:'Smart TV 4K', price:'499,00€', url:'#'},
        {img:'https://dummyimage.com/120x120/eee/222&text=ROBOT', name:'Robot Aspirateur', price:'199,00€', url:'#'},
        {img:'https://dummyimage.com/120x120/eee/222&text=CASQUE', name:'Casque Gaming', price:'89,00€', url:'#'},
        {img:'https://dummyimage.com/120x120/eee/222&text=VELO', name:'Vélo électrique', price:'899,00€', url:'#'},
        {img:'https://dummyimage.com/120x120/eee/222&text=CHAUSSURE', name:'Baskets sport', price:'69,00€', url:'#'},
        {img:'https://dummyimage.com/120x120/eee/222&text=TABLE', name:'Table design', price:'159,00€', url:'#'}
    ];
    function renderSuggestions(){
        const list = document.getElementById('suggestions-list');
        if(!list) return;
        list.innerHTML = suggestions.map(prod => `
            <div class='col-6 col-md-2 mb-3'>
                <a href="${prod.url}" class="text-decoration-none">
                    <img src="${prod.img}" alt="${prod.name}" class="img-thumb-100 rounded-8">
                    <div style="font-weight:600;font-size:1.08rem;">${prod.name}</div>
                    <div style="color:#43a047;font-weight:700;">${prod.price}</div>
                </a>
            </div>
        `).join('');
    }
    document.addEventListener('DOMContentLoaded', renderSuggestions);
    // --- Newsletter JS ---
    const newsletterForm = document.getElementById('newsletter-form');
    if(newsletterForm) {
      newsletterForm.addEventListener('submit',function(e){
          e.preventDefault();
          const msg = document.getElementById('newsletter-msg');
          if(msg) {
            msg.style.display='block';
            msg.textContent = 'Merci pour votre inscription !';
            setTimeout(()=>{
                msg.style.display='none';
            },3500);
          }
          this.reset();
      });
    }
    </script>
{% endblock %}
{% endblock %}
